{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/img/octagon.svg","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\n\nfunction templatePhotos(images) {\n  return images\n    .map(image => {\n      return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      data-source=\"${image.largeImageURL}\"\n      alt=\"Tags: ${image.tags}. Likes: ${image.likes},   Views: ${image.views},   Comments: ${image.comments},   Downloads: ${image.downloads}\"\n    />\n  </a>\n  <div class=\"gallery-item-info\">\n  <p class=\"info-image\"><b class=\"info-image-text\">Likes</b><span class=\"info-image-number\">${image.likes}</span></p>\n  <p class=\"info-image\"><b class=\"info-image-text\">Views</b><span class=\"info-image-number\">${image.views}</span></p>\n  <p class=\"info-image\"><b class=\"info-image-text\">Comments</b><span class=\"info-image-number\">${image.comments}</span></p>\n  <p class=\"info-image\"><b class=\"info-image-text\">Downloads</b><span class=\"info-image-number\">${image.downloads}</span></p>\n  </div>\n</li>`;\n    })\n    .join('');\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  overlayOpacity: 0.8,\n  captionsData: 'alt',\n  captionDelay: 250,\n  className: 'modal-image',\n});\n\nexport function renderPhotos(images) {\n  const markUp = templatePhotos(images);\n  gallery.insertAdjacentHTML('beforeend', markUp);\n  lightbox.refresh();\n}\n","import axios from 'axios';\n\nexport async function getPhotos(input, page) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const params = new URLSearchParams({\n    key: '20488832-3f7ee310b3351fba3525ae600',\n    q: input,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page,\n    per_page: '15',\n  });\n\n  try {\n    const result = await axios.get(`${BASE_URL}?${params}`);\n    return result.data;\n  } catch (error) {\n    throw new Error(error.message);\n  }\n}\n","export default \"__VITE_ASSET__de411352__\"","import { renderPhotos } from './js/render-functions.js';\nimport { getPhotos } from './js/pixabay-api.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport octagon from '../src/img/octagon.svg';\n\nconst form = document.querySelector('.form');\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst searchBtn = document.querySelector('.search-btn');\nconst loadBtn = document.querySelector('.load-btn');\n\nlet page = 1;\nlet totalHits = 0;\nlet userValue = '';\n\nsearchBtn.disabled = true;\n\nloaderHide();\n\nform.input.addEventListener('input', () => {\n  searchBtn.disabled = !form.input.value.trim();\n});\n\nform.addEventListener('submit', onGallery);\nloadBtn.addEventListener('click', handleLoad);\n\nasync function onGallery(event) {\n  event.preventDefault();\n\n  galleryContainer.innerHTML = '';\n\n  loaderShow();\n\n  userValue = event.target.elements.input.value.trim();\n\n  if (!userValue) {\n    loaderHide();\n    return;\n  }\n\n  searchBtn.disabled = true;\n\n  try {\n    const data = await getPhotos(userValue, (page = 1));\n    if (data && data.hits && data.hits.length) {\n      renderPhotos(data.hits);\n      totalHits = Math.ceil(data.totalHits / 15);\n      if (page < totalHits) {\n        visibilityLoad();\n      } else {\n        hiddenLoad();\n        iziToast.error({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          backgroundColor: '#EF4040',\n          theme: 'dark',\n          iconUrl: octagon,\n          maxWidth: 354,\n          messageSize: '16',\n        });\n      }\n    } else {\n      hiddenLoad();\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    }\n  } catch (error) {\n    iziToast.error({\n      message: error.message,\n      position: 'topRight',\n      backgroundColor: '#EF4040',\n      theme: 'dark',\n      iconUrl: octagon,\n      maxWidth: 354,\n      messageSize: '16',\n    });\n  } finally {\n    loaderHide();\n    searchBtn.disabled = true;\n  }\n\n  form.reset();\n}\n\nasync function handleLoad(event) {\n  page += 1;\n  hiddenLoad();\n  loaderShow();\n\n  try {\n    const data = await getPhotos(userValue, page);\n    if (data && data.hits && data.hits.length) {\n      renderPhotos(data.hits);\n      const cardHeight = document\n        .querySelector('.gallery-item')\n        .getBoundingClientRect().height;\n      window.scrollBy({\n        left: 0,\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n      if (page < totalHits) {\n        visibilityLoad();\n      } else {\n        hiddenLoad();\n        iziToast.error({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          backgroundColor: '#EF4040',\n          theme: 'dark',\n          iconUrl: octagon,\n          maxWidth: 354,\n          messageSize: '16',\n        });\n      }\n    }\n  } catch (error) {\n    alert(error.message);\n  } finally {\n    loaderHide();\n  }\n  form.reset();\n}\n\nfunction loaderShow() {\n  loader.style.display = 'inline-block';\n}\n\nfunction loaderHide() {\n  loader.style.display = 'none';\n}\n\nfunction visibilityLoad() {\n  loadBtn.classList.remove('hidden');\n}\n\nfunction hiddenLoad() {\n  loadBtn.classList.add('hidden');\n}\n"],"names":["gallery","templatePhotos","images","image","lightbox","SimpleLightbox","renderPhotos","markUp","getPhotos","input","page","BASE_URL","params","axios","error","octagon","form","galleryContainer","loader","searchBtn","loadBtn","totalHits","userValue","loaderHide","onGallery","handleLoad","event","loaderShow","data","visibilityLoad","hiddenLoad","iziToast","cardHeight"],"mappings":"+vBAGA,MAAMA,EAAU,SAAS,cAAc,UAAU,EAEjD,SAASC,EAAeC,EAAQ,CAC9B,OAAOA,EACJ,IAAIC,GACI;AAAA,kCACqBA,EAAM,aAAa;AAAA;AAAA;AAAA,aAGxCA,EAAM,YAAY;AAAA,qBACVA,EAAM,aAAa;AAAA,mBACrBA,EAAM,IAAI,YAAYA,EAAM,KAAK,cAAcA,EAAM,KAAK,iBAAiBA,EAAM,QAAQ,kBAAkBA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,8FAI/CA,EAAM,KAAK;AAAA,8FACXA,EAAM,KAAK;AAAA,iGACRA,EAAM,QAAQ;AAAA,kGACbA,EAAM,SAAS;AAAA;AAAA,MAG5G,EACA,KAAK,EAAE,CACZ,CAEA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,eAAgB,GAChB,aAAc,MACd,aAAc,IACd,UAAW,aACb,CAAC,EAEM,SAASC,EAAaJ,EAAQ,CACnC,MAAMK,EAASN,EAAeC,CAAM,EACpCF,EAAQ,mBAAmB,YAAaO,CAAM,EAC9CH,EAAS,QAAO,CAClB,CCrCO,eAAeI,EAAUC,EAAOC,EAAM,CAC3C,MAAMC,EAAW,2BACXC,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAAC,EACA,SAAU,IACd,CAAG,EAED,GAAI,CAEF,OADe,MAAMG,EAAM,IAAI,GAAGF,CAAQ,IAAIC,CAAM,EAAE,GACxC,IACf,OAAQE,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,OAAO,CAC9B,CACH,CCpBA,MAAeC,EAAA,6CCQTC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAU,SAAS,cAAc,WAAW,EAElD,IAAIV,EAAO,EACPW,EAAY,EACZC,EAAY,GAEhBH,EAAU,SAAW,GAErBI,IAEAP,EAAK,MAAM,iBAAiB,QAAS,IAAM,CACzCG,EAAU,SAAW,CAACH,EAAK,MAAM,MAAM,MACzC,CAAC,EAEDA,EAAK,iBAAiB,SAAUQ,CAAS,EACzCJ,EAAQ,iBAAiB,QAASK,CAAU,EAE5C,eAAeD,EAAUE,EAAO,CAS9B,GARAA,EAAM,eAAc,EAEpBT,EAAiB,UAAY,GAE7BU,IAEAL,EAAYI,EAAM,OAAO,SAAS,MAAM,MAAM,OAE1C,CAACJ,EAAW,CACdC,IACA,MACD,CAEDJ,EAAU,SAAW,GAErB,GAAI,CACF,MAAMS,EAAO,MAAMpB,EAAUc,EAAYZ,EAAO,CAAC,EACjD,GAAIkB,GAAQA,EAAK,MAAQA,EAAK,KAAK,OACjCtB,EAAasB,EAAK,IAAI,EACtBP,EAAY,KAAK,KAAKO,EAAK,UAAY,EAAE,EACrClB,EAAOW,EACTQ,KAEAC,IACAC,EAAS,MAAM,CACb,QAAS,6DACT,gBAAiB,UACjB,MAAO,OACP,QAAShB,EACT,SAAU,IACV,YAAa,IACvB,CAAS,OAGH,OAAAe,IACM,IAAI,MACR,0EACR,CAEG,OAAQhB,EAAO,CACdiB,EAAS,MAAM,CACb,QAASjB,EAAM,QACf,SAAU,WACV,gBAAiB,UACjB,MAAO,OACP,QAASC,EACT,SAAU,IACV,YAAa,IACnB,CAAK,CACL,QAAY,CACRQ,IACAJ,EAAU,SAAW,EACtB,CAEDH,EAAK,MAAK,CACZ,CAEA,eAAeS,EAAWC,EAAO,CAC/BhB,GAAQ,EACRoB,IACAH,IAEA,GAAI,CACF,MAAMC,EAAO,MAAMpB,EAAUc,EAAWZ,CAAI,EAC5C,GAAIkB,GAAQA,EAAK,MAAQA,EAAK,KAAK,OAAQ,CACzCtB,EAAasB,EAAK,IAAI,EACtB,MAAMI,EAAa,SAChB,cAAc,eAAe,EAC7B,sBAAqB,EAAG,OAC3B,OAAO,SAAS,CACd,KAAM,EACN,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAO,EACGtB,EAAOW,EACTQ,KAEAC,IACAC,EAAS,MAAM,CACb,QAAS,6DACT,gBAAiB,UACjB,MAAO,OACP,QAAShB,EACT,SAAU,IACV,YAAa,IACvB,CAAS,EAEJ,CACF,OAAQD,EAAO,CACd,MAAMA,EAAM,OAAO,CACvB,QAAY,CACRS,GACD,CACDP,EAAK,MAAK,CACZ,CAEA,SAASW,GAAa,CACpBT,EAAO,MAAM,QAAU,cACzB,CAEA,SAASK,GAAa,CACpBL,EAAO,MAAM,QAAU,MACzB,CAEA,SAASW,GAAiB,CACxBT,EAAQ,UAAU,OAAO,QAAQ,CACnC,CAEA,SAASU,GAAa,CACpBV,EAAQ,UAAU,IAAI,QAAQ,CAChC"}